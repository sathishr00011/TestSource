<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets" />

  <PropertyGroup>
    <TfCommand>"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\tf.exe"</TfCommand>
  </PropertyGroup>
  <PropertyGroup>
   
    <RemoteConfigurationContractsAssembly>RemoteConfiguration.Contracts.dll</RemoteConfigurationContractsAssembly>
    <SecurityContractsAssembly>Tesco.Com.InfrastructureServices.Security.Contracts.dll</SecurityContractsAssembly>
    <RemoteConfigurationAssembly>RemoteConfiguration.dll</RemoteConfigurationAssembly>
    <IdentityModelAssembly>Tesco.Com.IdentityModel.dll</IdentityModelAssembly>
    <InfrastructureHostAssembly>InfrastructureServiceHost.dll</InfrastructureHostAssembly>

  </PropertyGroup>

  <Target Name="MyTarget">
 
    <Exec Command="$(TfCommand) checkout /lock:none $(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(RemoteConfigurationContractsAssembly)" ContinueOnError="true" />
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\..\..\..\..\Binaries\$(RemoteConfigurationContractsAssembly)" DestinationFiles="$(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(RemoteConfigurationContractsAssembly)" ContinueOnError="true" />
    <Exec Command="$(TfCommand) checkin /bypass /noprompt /override:'***TARGET_CHECKIN***' /Comment:'***NO_CI***'" ContinueOnError="true" />
    
    <Exec Command="$(TfCommand) checkout /lock:none $(MSBuildProjectDirectory)\..\Lib\Tesco\$(SecurityContractsAssembly)" ContinueOnError="true" />
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\..\..\..\..\Binaries\$(SecurityContractsAssembly)" DestinationFiles="$(MSBuildProjectDirectory)\..\Lib\Tesco\$(SecurityContractsAssembly)" ContinueOnError="true" />
    <Exec Command="$(TfCommand) checkin /bypass /noprompt /override:'***TARGET_CHECKIN***' /Comment:'***NO_CI***'" ContinueOnError="true" />
    
    <Exec Command="$(TfCommand) checkout /lock:none $(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(RemoteConfigurationAssembly)" ContinueOnError="true" />
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\..\..\..\..\Binaries\$(RemoteConfigurationAssembly)" DestinationFiles="$(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(RemoteConfigurationAssembly)" ContinueOnError="true" />
    <Exec Command="$(TfCommand) checkin /bypass /noprompt /override:'***TARGET_CHECKIN***' /Comment:'***NO_CI***'" ContinueOnError="true" />
   
    <Exec Command="$(TfCommand) checkout /lock:none $(MSBuildProjectDirectory)\..\Lib\Tesco\$(IdentityModelAssembly)" ContinueOnError="true" />
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\..\..\..\..\Binaries\$(IdentityModelAssembly)" DestinationFiles="$(MSBuildProjectDirectory)\..\Lib\Tesco\$(IdentityModelAssembly)" ContinueOnError="true" />
    <Exec Command="$(TfCommand) checkin /bypass /noprompt /override:'***TARGET_CHECKIN***' /Comment:'***NO_CI***'" ContinueOnError="true" />

    <Exec Command="$(TfCommand) checkout /lock:none $(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(InfrastructureHostAssembly)" ContinueOnError="true" />
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\..\..\..\..\Binaries\$(InfrastructureHostAssembly)" DestinationFiles="$(MSBuildProjectDirectory)\..\Lib\DotcomApi\$(InfrastructureHostAssembly)" ContinueOnError="true" />
    <Exec Command="$(TfCommand) checkin /bypass /noprompt /override:'***TARGET_CHECKIN***' /Comment:'***NO_CI***'" ContinueOnError="true" />



  </Target>

</Project>